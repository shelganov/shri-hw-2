!function(i){var r={};function n(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=i,n.c=r,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=0)}([function(t,e,i){"use strict";var r=function(){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}}();i(1);new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentGesture=null,this.action={x:0,y:0,dx:0,dy:0,currentShiftX:0,currentShiftY:0},this.gestureCache=[],this.camera=null,this.imgFinishPositionX=null,this.prevZoom=-1,this.scale=1,this.brightness=.5,this.prevRotate=0,this.init()}return r(t,[{key:"init",value:function(){var i=this;document.addEventListener("DOMContentLoaded",function(){i.camera=document.querySelector(".camera"),i.cameraImg=document.querySelector(".camera__img"),i.imgFinishPositionX=i.cameraImg.width-document.querySelector(".card__img").offsetWidth,i.imgFinishPositionY=i.cameraImg.height-document.querySelector(".card__img").offsetHeight,i.scroll=document.querySelector(".card__img-scroll"),document.querySelector("#brightness").innerText=100*i.brightness.toFixed(2)+"%",i.camera.addEventListener("pointerdown",function(t){i.currentGesture=!0,i.gestureCache.push(t),i.action.x=t.x,i.action.y=t.y,i.camera.setPointerCapture(t.pointerId)}),i.camera.addEventListener("pointermove",function(t){if(i.currentGesture)if(2==i.gestureCache.length){i.updateEvent(t);var e=180*Math.atan((i.gestureCache[1].y-i.gestureCache[0].y)/(i.gestureCache[1].x-i.gestureCache[0].x))/Math.PI;Math.abs(e)<20?i.zoom(t):i.rotate(t)}else i.move(t)}),i.camera.addEventListener("pointerup",function(t){i.currentGesture=null,i.action.currentShiftX=i.action.dx,i.action.currentShiftY=i.action.dy,0<i.action.dx&&(i.action.currentShiftX=0),i.action.dx<=-i.imgFinishPositionX&&(i.action.currentShiftX=-i.imgFinishPositionX),0<i.action.dy&&(i.action.currentShiftY=0),i.action.dy<=-i.imgFinishPositionY&&(i.action.currentShiftY=-i.imgFinishPositionY),i.removeEvent(t),i.prevZoom=-1}),i.camera.addEventListener("pointercancel",function(t){i.currentGesture=null,i.removeEvent(t),i.prevZoom=-1})})}},{key:"updateEvent",value:function(t){for(var e=0;e<this.gestureCache.length;e++)if(this.gestureCache[e].pointerId==t.pointerId){this.gestureCache[e]=t;break}}},{key:"determDeltaMove",value:function(t){this.action.dx=-(this.action.x-t.x)+this.action.currentShiftX,this.action.dy=-(this.action.y-t.y)+this.action.currentShiftY,console.log(this.action.dx)}},{key:"move",value:function(t){this.determDeltaMove(t),this.action.dx<=0&&Math.abs(this.action.dx)<this.imgFinishPositionX&&(this.camera.style.left=this.action.dx+"px",this.scroll.style.transform="translateX("+-(document.querySelector(".card__img").offsetWidth-this.scroll.offsetWidth)*this.action.dx/(this.cameraImg.offsetWidth-document.querySelector(".card__img").offsetWidth)+"%)"),this.action.dy<=0&&Math.abs(this.action.dy)<this.imgFinishPositionY&&(this.camera.style.top=this.action.dy+"px")}},{key:"zoom",value:function(t){if(this.gestureSpace=Math.abs(this.gestureCache[0].clientX-this.gestureCache[1].clientX),0<this.prevZoom){if(this.prevZoom>this.gestureSpace){var e=(this.prevZoom-this.gestureSpace)/100;if(this.scale-e<=1)return;this.cameraImg.style.transform="scale("+(this.scale-e)+","+(this.scale-e)+")",this.scale=this.scale-e}if(this.prevZoom<this.gestureSpace){var i=(this.gestureSpace-this.prevZoom)/100;if(3<=this.scale-i)return;this.cameraImg.style.transform="scale("+(this.scale+i)+","+(this.scale+i)+")",this.scale=this.scale+i}}this.prevZoom=this.gestureSpace}},{key:"rotate",value:function(t){var e=Math.atan((this.gestureCache[1].y-this.gestureCache[0].y)/(this.gestureCache[1].x-this.gestureCache[0].x));3<Math.abs(e-this.prevRotate)&&(e-=Math.PI);var i=1;e>this.prevRotate?i=1.1:e<this.prevRotate&&(i=.9),this.brightness=Math.abs(e*i),this.brightness>this.maxBright&&(this.brightness=1),this.brightness<=0&&(this.brightness=0),this.prevRotate=e,document.querySelector("#brightness").innerText=100*this.brightness.toFixed(2)+"%",this.cameraImg.style.webkitFilter="brightness("+this.brightness}},{key:"removeEvent",value:function(t){for(var e=0;e<this.gestureCache.length;e++)if(this.gestureCache[e].pointerId==t.pointerId){this.gestureCache.splice(e,1);break}}},{key:"maxBright",get:function(){return 1}}]),t}())},function(t,e,i){}]);